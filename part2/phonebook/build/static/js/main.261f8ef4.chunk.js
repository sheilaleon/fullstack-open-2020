(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),i=t(14),o=t.n(i),u=(t(20),t(3)),s=t(4),l=t.n(s),d="/api/persons",b=function(){return l.a.get(d)},h=function(e){return l.a.post(d,e)},j=function(e,n){return l.a.put("".concat(d,"/").concat(e),n)},m=function(e){return l.a.delete("".concat(d,"/").concat(e))},f=function(e){var n=e.searchTerm,t=e.handleChange;return Object(c.jsxs)("div",{className:"search",children:[Object(c.jsx)("label",{htmlFor:"search",children:"Filter shown with "}),Object(c.jsx)("input",{id:"search",type:"text",value:n,onChange:t})]})},O=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,r=e.newNumber,i=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{id:"name",type:"text",value:t,onChange:a})]}),Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("label",{htmlFor:"number",children:"Number"}),Object(c.jsx)("input",{id:"number",type:"tel",value:r,onChange:i})]}),Object(c.jsx)("div",{style:{paddingTop:"1rem"},children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},p=function(e){var n=e.name,t=e.number,a=e.id,r=e.handleDelete;return Object(c.jsxs)("li",{children:[Object(c.jsxs)("strong",{children:[n,":"]})," ",t," ",Object(c.jsx)("button",{className:"delete",onClick:function(){return r(a,n)},children:"Delete"})]})},x=function(e){var n=e.persons,t=e.showAll,a=e.searchTerm,r=e.handleDelete,i=t?n:n.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));return Object(c.jsx)("ul",{children:i.map((function(e){return Object(c.jsx)(p,{name:e.name,id:e.id,number:e.number,handleDelete:r},e.id)}))})},v=function(e){var n=e.notification,t=e.notificationState;return null===n?null:Object(c.jsx)("div",{className:"notification ".concat(t),children:Object(c.jsx)("p",{children:n})})},w=function(){function e(){setTimeout((function(){J(null),q(null)}),5e3)}var n=Object(a.useState)([]),t=Object(u.a)(n,2),r=t[0],i=t[1],o=Object(a.useState)(""),s=Object(u.a)(o,2),l=s[0],d=s[1],p=Object(a.useState)(""),w=Object(u.a)(p,2),N=w[0],g=w[1],C=Object(a.useState)(""),S=Object(u.a)(C,2),y=S[0],k=S[1],D=Object(a.useState)(!0),T=Object(u.a)(D,2),A=T[0],F=T[1],P=Object(a.useState)(null),E=Object(u.a)(P,2),I=E[0],J=E[1],L=Object(a.useState)(null),B=Object(u.a)(L,2),M=B[0],q=B[1];Object(a.useEffect)((function(){b().then((function(e){i(e.data)}))}),[]);return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{notification:I,notificationState:M}),Object(c.jsx)(f,{searchTerm:y,handleChange:function(e){F(!1),k(e.target.value)}}),Object(c.jsx)(O,{addPerson:function(n){n.preventDefault();var t,c={name:l,number:N};if(t=l,r.some((function(e){return e.name===t}))){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var a=r.filter((function(e){return e.name===l}));j(a[0].id,c).then((function(n){i(r.map((function(e){return e.id!==a[0].id?e:n.data}))),J("".concat(a[0].name,"'s number has been updated.")),q("success"),e()}))}}else h(c).then((function(n){i(r.concat(n.data)),J("Added ".concat(n.data.name,".")),q("success"),e(),d(""),g("")}))},newName:l,handleNameChange:function(e){d(e.target.value)},newNumber:N,handleNumberChange:function(e){g(e.target.value)}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(x,{persons:r,searchTerm:y,showAll:A,handleDelete:function(n,t){window.confirm("Delete ".concat(t,"?"))&&m(n).then((function(){i(r.filter((function(e){return e.id!==n}))),J("".concat(t," has been removed.")),q("success"),e()})).catch((function(c){J("Information of ".concat(t," has already been removed.")),q("error"),e(),i(r.filter((function(e){return e.id!==n})))}))}})]})};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.261f8ef4.chunk.js.map